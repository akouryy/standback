# (?i:standback) 仕様

## Syntax
以下はaに対する操作(後述)である。

* `c/fn/` 関数呼び出し。引数はなくグローバル変数(後述)で渡す。
* `d/fn/body/` 関数定義
* `g/regex/replace-string/` 全置換(RubyのString#gsub)。replace部分に\1などを書いてもただの1になる。正しくは%1(後述)。
* `m/regex/then-body/else-body/` 条件分岐(正規表現がaにマッチするかどうか)
* `q/` aをエラー出力しプログラムを直ちに異常終了する(ただしaが空文字列の場合何も出力せず正常終了する)
* `s/regex/replace-string/` 置換(String#sub)
* `t/string/replace-string/` 全置換(String#tr)
* `w/regex/loop-body/` 繰り返し
* `#hogehoge` 行コメント

文字列のエスケープは`/, \, %`のみ認める(`\/, \\, \%`)。<br/>
正規表現の仕様はRubyのRegexp.newに準じる。<br/>
bodyのところは0個以上の操作の列。操作前、間、後には空白文字を入れてもよい。<br/>
プログラム全体もbodyと同じ形式。

## Variables
`a`と`A`の2つのグローバルな文字列がある。上の構文の最初の文字を大文字にするとAに対する操作になる。bodyには干渉しない。<br/>
関数呼び出しを大文字Cにすると関数内でaとAが入れ替わる(たとえば下の`c/\//`はnaをna/nAに置換するが、`C/\//`はnAをnA/naに置換する)。<br/>
グローバル変数の初期値はaが入力全体、Aは空文字列であり、プログラム終了時aが出力される。<br/>
regexをとる構文ではregexより右の部分で`%2, %&`等を使える。ネストする場合は`%%2, %%%%%'`など%の数で深さを指定する。`%`を`\%`に変えるとただの%と解釈される。

## Built-in Functions
* `ord`: `a/^-?[01]+(\.[01]+)?/` (以下、このaの部分文字列をnaと呼ぶ) をその文字コードを持つ文字に置換
* `chr`: `a/^./`をその文字コードに置換

以下はソースコード全体に「長」という文字が10000回以上出現する(コメント可)ときのみ使用できる。

### Numbers (float)
* `inc`: naをインクリメント
* `dec`: naをデクリメント
* `+:` naをna+nAに置換
* `/:` naをna/nAに置換
